{
  "bootmode": "bios",
  "disk": "/dev/sda",
  "hostname": "localhost",
  "install_linux_esx": true,
  "packages": [
    "bc",
    "bzip2",
    "curl",
    "dbus",
    "e2fsprogs",
    "file",
    "filesystem",
    "gzip",
    "iana-etc",
    "initramfs",
    "iproute2",
    "iputils",
    "linux",
    "open-vm-tools",
    "openssh",
    "photon-release",
    "photon-repos",
    "procps-ng",
    "rpm",
    "tdnf",
    "tzdata",
    "vim",
    "which"
  ],
  "partition_type": "msdos",
  "partitions": [
    {
      "filesystem": "ext4",
      "mountpoint": "/",
      "size": 0
    }
  ],
  "password": {
    "crypted": false,
    "text": "vagrant"
  },
  "postinstall": [
    "#!/bin/sh",
    "systemctl enable sshd-keygen.service sshd.service",
    "",
    "tdnf -q -y install sudo",
    "cat > /etc/sudoers.d/vagrant << EOF",
    "Defaults:vagrant env_keep += \"SSH_AUTH_SOCK\"",
    "Defaults:vagrant !requiretty",
    "vagrant ALL=(ALL) NOPASSWD: ALL",
    "EOF",
    "chmod 0440 /etc/sudoers.d/vagrant",
    "",
    "useradd --create-home --user-group vagrant",
    "install -o vagrant -g vagrant -m 0700 -d /home/vagrant/.ssh",
    "install -o vagrant -g vagrant -m 0600 /dev/null /home/vagrant/.ssh/authorized_keys",
    "curl -s -o /home/vagrant/.ssh/authorized_keys 'https://raw.githubusercontent.com/hashicorp/vagrant/master/keys/vagrant.pub'",
    "",
    "chpasswd 2>/dev/null << EOF",
    "root:vagrant",
    "vagrant:vagrant",
    "EOF"
  ],
  "ui": true
}
